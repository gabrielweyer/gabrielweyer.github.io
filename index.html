<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Gabriel Weyer &#8211; A somewhat technical blog</title>
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="My name is Gabriel Weyer. I’m a software developer based in Melbourne, Australia. I blog about technology.">
    <meta name="robots" content="all">
    <meta name="author" content="Gabriel Weyer">
    
    
    <link rel="canonical" href="https://gabrielweyer.net/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Gabriel Weyer - A somewhat technical blog" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201903231649" type="text/css">

    <!-- Fonts -->
    
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
    

    <!-- MathJax -->
    

    <!-- Verifications -->
    
    

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
    <meta name="twitter:site" content="@gabrielweyer" />
    <meta name="twitter:creator" content="@gabrielweyer" />
    
    <meta name="twitter:title" content="A somewhat technical blog" />
    <meta name="twitter:description" content="My name is Gabriel Weyer. I’m a software developer based in Melbourne, Australia. I blog about technology." />
    <meta name="twitter:url" content="https://gabrielweyer.net/" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    
</head>

<body class="site">
  
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="/" class="site-title">Gabriel Weyer<span class="site-sub-title"> &#8211; A somewhat technical blog</span></a>
      <nav class="site-nav">
        




    
    
    
    
        <a href="/about/">About</a>
    

    


      </nav>
      <div class="clearfix"></div>
      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        

<div class="home">
  
    <div class="posts">
      
        <div class="post py3">
          <p class="post-meta">Feb 6, 2019</p>
          <a href="/2019/02/06/azure-vm-pricing/" class="post-link"><h3 class="h1 post-title">Azure VM pricing</h3></a>
          <span class="post-summary">
            <p>I was recently faced with an interesting problem. A company wanted to cost the migration of thousands of <code class="highlighter-rouge">VMs</code> to <code class="highlighter-rouge">Azure</code> using a <a href="https://docs.microsoft.com/en-us/azure/architecture/cloud-adoption/digital-estate/5-rs-of-rationalization#rehost">lift and shift</a> approach (also known as rehost). Due to the short deadline, we were not able to get our hands on detailed data. All we were provided with was a machine name, <code class="highlighter-rouge">CPU</code> cores count, <code class="highlighter-rouge">RAM</code> and a description field that was sometimes populated. Utilisation, storage and network usage were notably missing. We knew we couldn’t cost the migration accurately due to these unknowns, but we had enough data to cost the <code class="highlighter-rouge">VMs</code> themselves as we had access to <code class="highlighter-rouge">CPU</code> cores count and <code class="highlighter-rouge">RAM</code>. I must also add that the <code class="highlighter-rouge">VMs</code> varied greatly in their hardware specifications.</p>

<p><code class="highlighter-rouge">Microsoft</code> offers a <a href="https://azure.microsoft.com/en-us/pricing/calculator/?service=virtual-machines">pricing calculator</a> but it only supports manual input which disqualified it for our use case. A few <code class="highlighter-rouge">Microsoft</code> employees wrote web applications automating the pricing of <code class="highlighter-rouge">VMs</code> by importing <code class="highlighter-rouge">Excel</code> spreadsheets or <code class="highlighter-rouge">CSV</code> files. The ones I tried only offered <code class="highlighter-rouge">USD</code> as a currency and choked for anything bigger than a few hundred <code class="highlighter-rouge">VMs</code>. The output file was using a <code class="highlighter-rouge">en-us</code> culture so it had to be post-processed before being open in <code class="highlighter-rouge">Excel</code>. I didn’t have the time to review and select a commercial solution (<a href="https://azure.microsoft.com/en-us/services/azure-migrate/">Azure Migrate</a> requires to create a <code class="highlighter-rouge">VM</code> on-premises which was not possible). At the end of the day I came up with a semi-automated process that did the trick, but I felt that not much work would be required to empower teams to price <code class="highlighter-rouge">VMs</code> based on a limited data set.</p>


             
            
            
              <a href="/2019/02/06/azure-vm-pricing/">Continue reading</a>
            
          </span>
        </div>
      
        <div class="post py3">
          <p class="post-meta">May 18, 2018</p>
          <a href="/2018/05/18/advanced-dotnet-debugging-2/" class="post-link"><h3 class="h1 post-title">Advanced .NET Debugging #2</h3></a>
          <span class="post-summary">
            <p>I’m continuing to read the excellent <a href="https://www.goodreads.com/book/show/7306509-advanced-net-debugging">Advanced .NET Debugging</a> by Mario Hewardt. Last time I looked at <a href="/2018/04/06/advanced-dotnet-debugging-1/">finding the entry point of a native image</a>. This time around I’ll be investigating the launch of a <strong>managed</strong> image by <code class="highlighter-rouge">Windows</code>.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>A hex viewer
    <ul>
      <li>I used the <a href="https://peclrviewer.azurewebsites.net/">PE CLR Viewer</a> (<strong>disclaimer</strong>: I created this truly ugly looking website)</li>
    </ul>
  </li>
</ul>


             
            
            
              <a href="/2018/05/18/advanced-dotnet-debugging-2/">Continue reading</a>
            
          </span>
        </div>
      
        <div class="post py3">
          <p class="post-meta">May 4, 2018</p>
          <a href="/2018/05/04/windbg-2-blocked-async/" class="post-link"><h3 class="h1 post-title">WinDbg #2 - The blocked async</h3></a>
          <span class="post-summary">
            <p>Today’s exercise is not an exercise! The investigation I’m about to describe was triggered by a production outage affecting multiple <code class="highlighter-rouge">API</code>s - albeit not at the same time - at a customer. For obvious reasons I’ll not be able to share the code and will have to alter / obfuscate some of the commands’ results. I still think this is a valuable exercise as it is a classic example of an easy to make mistake leading to a catastrophic result.</p>

<p>The other interesting point is that I had no idea what the issue was so I’ll not be following a script as I did in the first instalment.</p>


             
            
            
              <a href="/2018/05/04/windbg-2-blocked-async/">Continue reading</a>
            
          </span>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Apr 21, 2018</p>
          <a href="/2018/04/21/cake-build/" class="post-link"><h3 class="h1 post-title">Cake build</h3></a>
          <span class="post-summary">
            <p><strong>5th of Jan 2019</strong>: a lot has been happening since I initially wrote this post. <code class="highlighter-rouge">Azure DevOps</code> released a free tier for open source projects, the <code class="highlighter-rouge">Cake</code> and <code class="highlighter-rouge">GitVersion</code> contributors have been hard at work to take advantage of the latest features of <code class="highlighter-rouge">.NET Core</code>. So much things have changed that I decided to update this post to reflect the current state of affairs (inclusion of <code class="highlighter-rouge">Azure DevOps</code>, upgrade to <code class="highlighter-rouge">.NET Core 2.2</code>, utilisation of <code class="highlighter-rouge">.NET Core global tools</code> and removing the <code class="highlighter-rouge">Mono</code> requirement on <code class="highlighter-rouge">Unix</code> platforms).</p>

<p>As a developer I’m amazed by the number of free tools and services available. I wanted to create an end-to-end demo of a <code class="highlighter-rouge">CI/CD</code> pipeline that would include:</p>

<ul>
  <li><a href="/2018/04/21/cake-build/#configuration">Trigger a build on commit</a></li>
  <li><a href="/2018/04/21/cake-build/#semantic-versioning">Use semantic versioning</a></li>
  <li><a href="/2018/04/21/cake-build/#run-the-tests">Run tests</a></li>
  <li><a href="/2018/04/21/cake-build/#publish-the-test-results">Publish test results</a></li>
  <li><a href="/2018/04/21/cake-build/#create-nuget-packages">Create NuGet packages</a></li>
  <li><a href="/2018/04/21/cake-build/#publish-the-nuget-packages">Publish the NuGet packages</a></li>
  <li><a href="/2018/04/21/cake-build/#create-a-github-release">Create a GitHub release</a></li>
</ul>

<p>For my purpose I wanted anonymous users to have access to a read-only view. I initially selected <a href="https://www.appveyor.com/">AppVeyor</a> as it seems to be the most popular choice for <code class="highlighter-rouge">.NET</code> open-source projects. But while browsing around I discovered than projects were often using more than one platform. <a href="https://travis-ci.org/">Travis CI</a> and <a href="https://circleci.com/">CircleCI</a> seemed to be the two other prevailing options. Since the initial version of this post, <a href="https://azure.microsoft.com/en-au/services/devops/">Azure DevOps</a> has released a free and unlimited plan for open source projects. I decided to leverage the four platforms so that I could highlight their pros and cons.</p>


             
            
            
              <a href="/2018/04/21/cake-build/">Continue reading</a>
            
          </span>
        </div>
      
    </div>

    
<div class="pagination clearfix mb1 mt4">
  <div class="left">
    
      <span class="pagination-item disabled">Newer</span>
    
  </div>
  <div class="right">
    
      <a class="pagination-item" href="/page2">Older</a>
    
  </div>
  <div class="pagination-meta">Page 1 of 5</div>
</div>


  
</div>

      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
    <small>
      Gabriel Weyer. <a href="https://github.com/johnotander/pixyll">Theme</a> crafted with &lt;3 by <a href="https://twitter.com/4lpine">John Otander</a>.
    </small>
  </div>
</footer>


</body>
</html>

I"3<p>I was recently faced with an interesting problem. A company wanted to cost the migration of thousands of <code class="language-plaintext highlighter-rouge">VMs</code> to <code class="language-plaintext highlighter-rouge">Azure</code> using a <a href="https://docs.microsoft.com/en-us/azure/architecture/cloud-adoption/digital-estate/5-rs-of-rationalization#rehost">lift and shift</a> approach (also known as rehost). Due to the short deadline, we were not able to get our hands on detailed data. All we were provided with was a machine name, <code class="language-plaintext highlighter-rouge">CPU</code> cores count, <code class="language-plaintext highlighter-rouge">RAM</code> and a description field that was sometimes populated. Utilisation, storage and network usage were notably missing. We knew we couldn’t cost the migration accurately due to these unknowns, but we had enough data to cost the <code class="language-plaintext highlighter-rouge">VMs</code> themselves as we had access to <code class="language-plaintext highlighter-rouge">CPU</code> cores count and <code class="language-plaintext highlighter-rouge">RAM</code>. I must also add that the <code class="language-plaintext highlighter-rouge">VMs</code> varied greatly in their hardware specifications.</p>

<p><code class="language-plaintext highlighter-rouge">Microsoft</code> offers a <a href="https://azure.microsoft.com/en-us/pricing/calculator/?service=virtual-machines">pricing calculator</a> but it only supports manual input which disqualified it for our use case. A few <code class="language-plaintext highlighter-rouge">Microsoft</code> employees wrote web applications automating the pricing of <code class="language-plaintext highlighter-rouge">VMs</code> by importing <code class="language-plaintext highlighter-rouge">Excel</code> spreadsheets or <code class="language-plaintext highlighter-rouge">CSV</code> files. The ones I tried only offered <code class="language-plaintext highlighter-rouge">USD</code> as a currency and choked for anything bigger than a few hundred <code class="language-plaintext highlighter-rouge">VMs</code>. The output file was using a <code class="language-plaintext highlighter-rouge">en-us</code> culture so it had to be post-processed before being open in <code class="language-plaintext highlighter-rouge">Excel</code>. I didn’t have the time to review and select a commercial solution (<a href="https://azure.microsoft.com/en-us/services/azure-migrate/">Azure Migrate</a> requires to create a <code class="language-plaintext highlighter-rouge">VM</code> on-premises which was not possible). At the end of the day I came up with a semi-automated process that did the trick, but I felt that not much work would be required to empower teams to price <code class="language-plaintext highlighter-rouge">VMs</code> based on a limited data set.</p>

:ET